# ============================================================================
# DATABASE VARIATION - POSTGRESQL
# ============================================================================
# Perfect for: Production deployments, high concurrency, large datasets
# Handles: 1M+ requests/day
# Storage: Client-server database with replication support
#
# Advantages:
#   ✅ High concurrency (many simultaneous writers)
#   ✅ Full SQL support + extensions
#   ✅ Built-in replication
#   ✅ ACID compliance
#   ✅ Industry standard
#
# Setup Options:
#   1. Self-hosted: Install PostgreSQL on server
#   2. Managed: AWS RDS, Azure Database, Google Cloud SQL
#   3. Supabase: Managed PostgreSQL with extras
# ============================================================================

DEPLOYMENT_MODE=single-vm
NODE_ENV=production

# Database - PostgreSQL
DATABASE_TYPE=postgresql
DATABASE_URL=postgresql://username:password@localhost:5432/bharatmart

# Or separate connection parameters
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=bharatmart
# DATABASE_USER=postgres
# DATABASE_PASSWORD=<REPLACE_THIS>

# SSL Configuration (for production)
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=false  # Set to true in production with valid cert

# Connection Pool
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=2000

# Performance Tuning
DATABASE_STATEMENT_TIMEOUT=30000  # 30 seconds
DATABASE_QUERY_TIMEOUT=10000      # 10 seconds

# Read Replicas (optional, for high-read workloads)
# DATABASE_READ_REPLICA_URL=postgresql://user:pass@read-replica:5432/bharatmart

# Authentication - Local JWT
AUTH_PROVIDER=local
JWT_SECRET=<REPLACE_WITH_SECURE_RANDOM_64_CHAR_STRING>
JWT_EXPIRY=1h
JWT_REFRESH_EXPIRY=7d

# Other layers
WORKER_MODE=bull-queue
QUEUE_REDIS_URL=redis://localhost:6379
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://localhost:6379

PORT=3000
FRONTEND_URL=https://yourdomain.com

# PostgreSQL Setup Commands:
#
# 1. Install PostgreSQL:
#    Ubuntu: sudo apt install postgresql postgresql-contrib
#    Mac: brew install postgresql
#
# 2. Create database and user:
#    sudo -u postgres psql
#    CREATE DATABASE bharatmart;
#    CREATE USER bharatmart_user WITH PASSWORD 'secure_password';
#    GRANT ALL PRIVILEGES ON DATABASE bharatmart TO bharatmart_user;
#
# 3. Run migrations:
#    psql -U bharatmart_user -d bharatmart -f database/schema.sql
#
# 4. Enable extensions (optional):
#    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
#    CREATE EXTENSION IF NOT EXISTS "pg_stat_statements";
