# Backend API Configuration (Express.js)
# Copy this to .env for production deployment

# ==========================================
# SERVER CONFIGURATION
# ==========================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ==========================================
# LAYER 1: FRONTEND CONNECTION
# ==========================================
# Frontend URL (for CORS configuration)
FRONTEND_URL=https://yourdomain.com
# Allowed origins (comma-separated for multiple)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ==========================================
# LAYER 3: DATABASE CONNECTION
# ==========================================
# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# PostgreSQL Direct Connection (optional)
DATABASE_URL=postgresql://user:password@db-host:5432/database
DATABASE_POOL_SIZE=20
DATABASE_TIMEOUT=30000

# ==========================================
# LAYER 4: CACHE CONNECTION
# ==========================================
# Redis Cache Configuration
CACHE_REDIS_URL=redis://cache-host:6379
CACHE_REDIS_PASSWORD=your-redis-password
CACHE_REDIS_DB=0
CACHE_REDIS_TLS_ENABLED=false
CACHE_TTL=3600
CACHE_ENABLED=true

# ==========================================
# LAYER 5: QUEUE CONNECTION
# ==========================================
# Queue Redis Configuration (separate from cache)
QUEUE_REDIS_URL=redis://queue-host:6379
QUEUE_REDIS_PASSWORD=your-queue-password
QUEUE_REDIS_DB=1
QUEUE_REDIS_TLS_ENABLED=false

# ==========================================
# LAYER 6: MONITORING CONNECTION
# ==========================================
# Prometheus Metrics
PROMETHEUS_ENABLED=true
METRICS_PORT=9090
METRICS_PREFIX=bharatmart_api

# External Monitoring Services (optional)
# PROMETHEUS_PUSHGATEWAY_URL=http://monitoring-host:9091
# GRAFANA_API_URL=http://monitoring-host:3001

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/bharatmart/api.log

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
SESSION_SECRET=your-session-secret-here
JWT_SECRET=your-jwt-secret-here
API_KEY=your-internal-api-key

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# SCALING CONFIGURATION
# ==========================================
# Cluster mode (for multi-core scaling)
CLUSTER_MODE=false
WORKER_PROCESSES=auto

# Connection Pool Sizes
MAX_CONNECTIONS_PER_INSTANCE=100
KEEP_ALIVE_TIMEOUT=65000

# ==========================================
# HEALTH CHECK CONFIGURATION
# ==========================================
HEALTH_CHECK_INTERVAL=30000
READY_CHECK_TIMEOUT=5000
